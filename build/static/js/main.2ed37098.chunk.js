(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{21:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(0),a=t(1),r=t.n(a),o=t(15),u=t.n(o),i=(t(21),t(6)),s=t(3),d=function(e){var n=e.person,t=e.deletePerson;return Object(c.jsxs)("div",{children:[n.name," ",n.number," ",Object(c.jsx)("button",{onClick:function(){return t(n)},children:"delete"})]})},l=function(e){var n=e.persons,t=e.deletePerson;return Object(c.jsx)("div",{children:n.map((function(e){return Object(c.jsx)(d,{person:e,deletePerson:t},e.name)}))})},j=function(e){var n=e.addPerson,t=e.handleNameChange,a=e.handleNumberChange,r=e.newName,o=e.newNumber;return Object(c.jsxs)("form",{onSubmit:n,children:[Object(c.jsxs)("div",{children:["name: ",Object(c.jsx)("input",{value:r,onChange:t})]}),Object(c.jsxs)("div",{children:["number: ",Object(c.jsx)("input",{value:o,onChange:a})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"add"})})]})},h=function(e){var n=e.searchName,t=e.handleSearchChange;return Object(c.jsxs)("span",{children:["filter shown with: ",Object(c.jsx)("input",{value:n,onChange:t})]})},b=function(e){var n=e.notification;return null===n?null:Object(c.jsx)("div",{className:n.type,children:n.message})},f=t(4),m=t.n(f),O="/api/persons",p=function(){return m.a.get(O).then((function(e){return e.data}))},v=function(e){return m.a.post(O,e).then((function(e){return e.data}))},x=function(e,n){return m.a.put("".concat(O,"/").concat(e),n).then((function(e){return e.data}))},g=function(e){return m.a.delete("".concat(O,"/").concat(e)).then((function(e){return e.data}))},w=function(){var e=Object(a.useState)([]),n=Object(s.a)(e,2),t=n[0],r=n[1],o=Object(a.useState)(""),u=Object(s.a)(o,2),d=u[0],f=u[1],m=Object(a.useState)(""),O=Object(s.a)(m,2),w=O[0],N=O[1],C=Object(a.useState)(""),y=Object(s.a)(C,2),S=y[0],P=y[1],k=Object(a.useState)(null),D=Object(s.a)(k,2),E=D[0],I=D[1];Object(a.useEffect)((function(){p().then((function(e){r(e)}))}),[]);var J=function(){v({name:d,number:w}).then((function(e){A({message:"Added ".concat(e.name),type:"success"}),r(t.concat(e))})).catch((function(e){console.log(e.response.data),A({message:e.response.data.error,type:"error"})}))},L=function(e){if(window.confirm("".concat(d," is already added to phonebook, replace the old number with a new one?"))){var n=Object(i.a)(Object(i.a)({},e),{},{number:w});x(n.id,n).then((function(e){A({message:"Updated ".concat(e.name),type:"success"}),r(t.map((function(t){return t.id!==n.id?t:e})))})).catch((function(e){A({message:"Information of ".concat(n.name," has already been removed from server"),type:"error"}),r(t.filter((function(e){return e.id!==n.id})))}))}},A=function(e){I(e),f(""),N(""),setTimeout((function(){I(null)}),2e3)};return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(b,{notification:E}),Object(c.jsx)(h,{searchName:S,handleSearchChange:function(e){P(e.target.value)}}),Object(c.jsx)("h2",{children:"add a new"}),Object(c.jsx)(j,{addPerson:function(e){e.preventDefault();var n=t.find((function(e){return e.name===d}));void 0!==n?L(n):J()},newName:d,newNumber:w,handleNameChange:function(e){f(e.target.value)},handleNumberChange:function(e){N(e.target.value)}}),Object(c.jsx)("h2",{children:"Numbers"}),Object(c.jsx)(l,{persons:t.filter((function(e){return e.name.toLowerCase().includes(S.toLowerCase())})),searchName:S,deletePerson:function(e){window.confirm("Delete ".concat(e.name," ?"))&&g(e.id).then((function(n){A({message:"Deleted ".concat(e.name),type:"success"}),r(t.filter((function(n){return n.id!==e.id})))}))}})]})};u.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(w,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.2ed37098.chunk.js.map